// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id       String  @id @default(uuid())
  nickname String
  password String
  name     String?
}

model Partner {
  id              String     @id @default(uuid())
  name            String
  shortName       String?    @unique
  ogrn            String?    @unique
  ogrnDate        DateTime?
  inn             String     @unique
  address1        String?
  address2        String?
  email           String?
  phone           String?
  bank            String?
  boss            String?
  bossGenitive    String?
  //createdAt       DateTime   @default(now())
  createdContract Contract[]
}

model Contract {
  id              String  @id @default(uuid())
  contractNumber  String?
  contractDate    DateTime?
  place           ConstractionPlace @relation(fields: [placeId], references: [id]) 
  placeId         Int @default(1)
  original        Boolean?
  cloudCopy       String?
  partner         Partner @relation(fields: [partnerId], references: [id])
  partnerId       String
  createdAddendum Addendum[]
}

model Addendum {
  id              String  @id @default(uuid())
  addendumNumber  String?
  addendumDate    DateTime?
  original        Boolean?
  cloudCopy       String?
  contract        Contract @relation(fields: [contractId], references: [id])
  contractId      String
}

model ConstractionPlace {
  id              Int     @id @default(autoincrement())
  name            String
  fullAddress     String?
  status          Boolean @default(true)
  createdContract Contract[]
}